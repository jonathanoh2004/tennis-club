{
  "C:\\Users\\jonat\\github\\tennis-club\\backend\\serverless.yml": {
    "versionFramework": "4.18.2",
    "servicePath": "C:\\Users\\jonat\\github\\tennis-club\\backend\\serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "service": "tennis-club-tracker",
      "frameworkVersion": "4",
      "provider": {
        "name": "aws",
        "runtime": "nodejs20.x",
        "region": "us-west-2",
        "stage": "dev",
        "environment": {
          "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
          "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
          "USERS_TABLE": "tennis-club-tracker-dev-Users",
          "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections",
          "CLUB_MEMBERS_TABLE": "tennis-club-tracker-dev-ClubMembers",
          "MATCHES_BY_CLUB_INDEX": "byClubV2",
          "COGNITO_REGION": "us-east-2",
          "COGNITO_POOL_ID": "us-east-2_EMupYOMCX",
          "COGNITO_CLIENT_ID": "35qpjq5uuv929k26amc1rbkdlk"
        },
        "iam": {
          "role": {
            "statements": [
              {
                "Effect": "Allow",
                "Action": [
                  "dynamodb:PutItem",
                  "dynamodb:GetItem",
                  "dynamodb:UpdateItem",
                  "dynamodb:DeleteItem",
                  "dynamodb:Query",
                  "dynamodb:Scan"
                ],
                "Resource": [
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Clubs",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Matches",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Users",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Connections",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-ClubMembers",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Matches/index/*",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Connections/index/*",
                  "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-ClubMembers/index/*"
                ]
              },
              {
                "Effect": "Allow",
                "Action": [
                  "execute-api:ManageConnections"
                ],
                "Resource": "arn:aws:execute-api:us-west-2:047212758498:*/dev/@connections/*"
              }
            ]
          }
        },
        "versionFunctions": true,
        "remoteFunctionData": {
          "Configuration": {
            "FunctionName": "tennis-club-tracker-dev-finalizeMatch",
            "FunctionArn": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-finalizeMatch",
            "Runtime": "nodejs20.x",
            "Role": "arn:aws:iam::047212758498:role/tennis-club-tracker-dev-us-west-2-lambdaRole",
            "Handler": "handlers/matches.finalize",
            "CodeSize": 3459610,
            "Description": "",
            "Timeout": 6,
            "MemorySize": 1024,
            "LastModified": "2025-09-15T21:23:09.000+0000",
            "CodeSha256": "aAYrZEPZvgsyEDBm3EbanX8cJucK5I8BlBEFPX5fLZ8=",
            "Version": "$LATEST",
            "VpcConfig": {
              "SubnetIds": [],
              "SecurityGroupIds": [],
              "VpcId": "",
              "Ipv6AllowedForDualStack": false
            },
            "Environment": {
              "Variables": {
                "CLUB_MEMBERS_TABLE": "tennis-club-tracker-dev-ClubMembers",
                "COGNITO_POOL_ID": "us-east-2_EMupYOMCX",
                "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
                "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
                "USERS_TABLE": "tennis-club-tracker-dev-Users",
                "COGNITO_REGION": "us-east-2",
                "MATCHES_BY_CLUB_INDEX": "byClubV2",
                "COGNITO_CLIENT_ID": "35qpjq5uuv929k26amc1rbkdlk",
                "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections"
              }
            },
            "KMSKeyArn": null,
            "TracingConfig": {
              "Mode": "PassThrough"
            },
            "MasterArn": null,
            "RevisionId": "55ac9c27-24de-4334-ae14-953cf5fbc242",
            "State": "Active",
            "StateReason": null,
            "StateReasonCode": null,
            "LastUpdateStatus": "Successful",
            "LastUpdateStatusReason": null,
            "LastUpdateStatusReasonCode": null,
            "PackageType": "Zip",
            "SigningProfileVersionArn": null,
            "SigningJobArn": null,
            "Architectures": [
              "x86_64"
            ],
            "EphemeralStorage": {
              "Size": 512
            },
            "SnapStart": {
              "ApplyOn": "None",
              "OptimizationStatus": "Off"
            },
            "RuntimeVersionConfig": {
              "RuntimeVersionArn": "arn:aws:lambda:us-west-2::runtime:1ffa4c233e75382c8a39aa96770f3b81af75cba9794a5c2a1750c1ee63cdfe10"
            },
            "LoggingConfig": {
              "LogFormat": "Text",
              "ApplicationLogLevel": null,
              "SystemLogLevel": null,
              "LogGroup": "/aws/lambda/tennis-club-tracker-dev-finalizeMatch"
            },
            "Layers": []
          },
          "Code": {
            "RepositoryType": "S3",
            "Location": "https://awslambda-us-west-2-tasks.s3.us-west-2.amazonaws.com/snapshots/047212758498/tennis-club-tracker-dev-finalizeMatch-7a2269c8-9e0c-4ab5-a96a-89dc2f43c540?versionId=Uqcux77FvYyh87nS19AJagyeUPMKNNqI&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEP7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIB5V6xS088Kact7LdRX214Nyqv%2FUuj10rCb%2Bssd00i3RAiAvnCeEiOz23JNkp9eWBZGOEBC7tpqABTheafyzvcD4KiqJAgh3EAUaDDUwMjI5NzA3NjE2MyIMgBZWI5UMr3eYJDG8KuYBtWPBqV2OzFuj3ahdSh0T47enNRQeEtcFZQKaqHHCzROxuVv2g8k6FAtRA4fOLVcnJ9DfuULFIhgnOWfspJOJDU%2Bqr9RhqUa1bRYuqdLlWibrNTlL5aZg2dKop0lXPDtSOmeJTP%2FKGdB7GL37V63U5k5QUVk0mIzQ7q2uTqkteGiFjbJRIHHogpVeB0uRuDntAgG9fUSPvBkAe0GFr8mQkptL8Y5T2m39wYTGWl5G7SjPOWHqfXCCvip12m%2BbUZSsCzBDLR85O5fYfShmpbJ5ss3BCVAYxHMBge7MeSqrKIfsQAI9W4gwmr%2BgxgY6kAFxVwZCCSg9Oz3vhBC%2BEPlY78hfCVFPFQeba%2FFBn0bnaHrjI6MyhExoUDjKNvvqJrt9jSM2rTbec7CUBPBYeBR1hviZhtz8%2FwFWutKaPyXRDPjCHbVKfv9ZD%2F2oRjs5R7RzNK6EJozBZGCg6IiU4JD0Ue42XdeCqYIp7KK2%2FZrz3%2FP6%2F02irzyJQnwyh8J5mtI%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250915T214100Z&X-Amz-SignedHeaders=host&X-Amz-Expires=600&X-Amz-Credential=ASIAXJ4Z5EHB73PBDV3Y%2F20250915%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Signature=58ca998e544852513cdf14f29efc60c05952c89d7ea4ff816bd536d12af50015",
            "ImageUri": null,
            "ResolvedImageUri": null
          },
          "Tags": {
            "aws:cloudformation:stack-name": "tennis-club-tracker-dev",
            "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-west-2:047212758498:stack/tennis-club-tracker-dev/ff704d60-75ac-11f0-8fa9-0a13a4d37ce1",
            "STAGE": "dev",
            "aws:cloudformation:logical-id": "FinalizeMatchLambdaFunction"
          }
        }
      },
      "package": {
        "individually": true,
        "patterns": [
          "handlers/**",
          "utils/**",
          "node_modules/**",
          "package.json",
          "package-lock.json"
        ],
        "artifactsS3KeyDirname": "serverless/tennis-club-tracker/dev/code-artifacts"
      },
      "functions": {
        "getClubs": {
          "handler": "handlers/clubs.get",
          "events": [
            {
              "http": {
                "path": "clubs",
                "method": "get",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-getClubs"
        },
        "createClub": {
          "handler": "handlers/clubs.create",
          "events": [
            {
              "http": {
                "path": "clubs",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-createClub"
        },
        "createMatch": {
          "handler": "handlers/matches.create",
          "events": [
            {
              "http": {
                "path": "matches",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-createMatch"
        },
        "listMatches": {
          "handler": "handlers/matches.list",
          "events": [
            {
              "http": {
                "path": "matches",
                "method": "get",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-listMatches"
        },
        "getMatch": {
          "handler": "handlers/matches.get",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}",
                "method": "get",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-getMatch"
        },
        "updateScore": {
          "handler": "handlers/matches.score",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}/score",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-updateScore"
        },
        "finalizeMatch": {
          "handler": "handlers/matches.finalize",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}/finalize",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-finalizeMatch"
        },
        "getMe": {
          "handler": "handlers/users.getMe",
          "events": [
            {
              "http": {
                "path": "me",
                "method": "get",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-getMe"
        },
        "updateProfile": {
          "handler": "handlers/users.updateProfile",
          "events": [
            {
              "http": {
                "path": "profile",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-updateProfile"
        },
        "joinClub": {
          "handler": "handlers/members.join",
          "events": [
            {
              "http": {
                "path": "clubs/{clubId}/members",
                "method": "post",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-joinClub"
        },
        "listMembers": {
          "handler": "handlers/members.list",
          "events": [
            {
              "http": {
                "path": "clubs/{clubId}/members",
                "method": "get",
                "cors": {
                  "origins": [
                    "https://tenniscluboh.com",
                    "https://www.tenniscluboh.com"
                  ],
                  "headers": [
                    "Content-Type",
                    "Authorization"
                  ],
                  "allowCredentials": "<REDACTED>"
                }
              }
            }
          ],
          "name": "tennis-club-tracker-dev-listMembers"
        },
        "preSignUp": {
          "handler": "handlers/authTriggers.preSignUp",
          "events": [],
          "name": "tennis-club-tracker-dev-preSignUp"
        },
        "wsConnect": {
          "handler": "handlers/websocket.connect",
          "events": [
            {
              "websocket": {
                "route": "$connect"
              }
            }
          ],
          "name": "tennis-club-tracker-dev-wsConnect"
        },
        "wsDisconnect": {
          "handler": "handlers/websocket.disconnect",
          "events": [
            {
              "websocket": {
                "route": "$disconnect"
              }
            }
          ],
          "name": "tennis-club-tracker-dev-wsDisconnect"
        },
        "wsDefault": {
          "handler": "handlers/websocket.onMessage",
          "events": [
            {
              "websocket": {
                "route": "$default"
              }
            }
          ],
          "name": "tennis-club-tracker-dev-wsDefault"
        }
      },
      "resources": {
        "Resources": {
          "ClubsTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Clubs",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "clubId",
                  "KeyType": "HASH"
                }
              ]
            }
          },
          "UsersTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Users",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "userId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "userId",
                  "KeyType": "HASH"
                }
              ]
            }
          },
          "MatchesTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Matches",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "matchId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "startedAt",
                  "AttributeType": "N"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "matchId",
                  "KeyType": "HASH"
                }
              ],
              "GlobalSecondaryIndexes": [
                {
                  "IndexName": "byClub",
                  "KeySchema": [
                    {
                      "AttributeName": "clubId",
                      "KeyType": "HASH"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                },
                {
                  "IndexName": "byClubV2",
                  "KeySchema": [
                    {
                      "AttributeName": "clubId",
                      "KeyType": "HASH"
                    },
                    {
                      "AttributeName": "startedAt",
                      "KeyType": "RANGE"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                }
              ]
            }
          },
          "ConnectionsTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Connections",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "connectionId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "connectionId",
                  "KeyType": "HASH"
                }
              ],
              "GlobalSecondaryIndexes": [
                {
                  "IndexName": "byClub",
                  "KeySchema": [
                    {
                      "AttributeName": "clubId",
                      "KeyType": "HASH"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                }
              ]
            }
          },
          "ClubMembersTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-ClubMembers",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "userId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "clubId",
                  "KeyType": "HASH"
                },
                {
                  "AttributeName": "userId",
                  "KeyType": "RANGE"
                }
              ],
              "GlobalSecondaryIndexes": [
                {
                  "IndexName": "byUser",
                  "KeySchema": [
                    {
                      "AttributeName": "userId",
                      "KeyType": "HASH"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                }
              ]
            }
          }
        }
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "us-west-2",
      "stage": "dev",
      "environment": {
        "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
        "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
        "USERS_TABLE": "tennis-club-tracker-dev-Users",
        "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections",
        "CLUB_MEMBERS_TABLE": "tennis-club-tracker-dev-ClubMembers",
        "MATCHES_BY_CLUB_INDEX": "byClubV2",
        "COGNITO_REGION": "us-east-2",
        "COGNITO_POOL_ID": "us-east-2_EMupYOMCX",
        "COGNITO_CLIENT_ID": "35qpjq5uuv929k26amc1rbkdlk"
      },
      "iam": {
        "role": {
          "statements": [
            {
              "Effect": "Allow",
              "Action": [
                "dynamodb:PutItem",
                "dynamodb:GetItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:Query",
                "dynamodb:Scan"
              ],
              "Resource": [
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Clubs",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Matches",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Users",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Connections",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-ClubMembers",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Matches/index/*",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-Connections/index/*",
                "arn:aws:dynamodb:us-west-2:047212758498:table/tennis-club-tracker-dev-ClubMembers/index/*"
              ]
            },
            {
              "Effect": "Allow",
              "Action": [
                "execute-api:ManageConnections"
              ],
              "Resource": "arn:aws:execute-api:us-west-2:047212758498:*/dev/@connections/*"
            }
          ]
        }
      },
      "versionFunctions": true,
      "remoteFunctionData": {
        "Configuration": {
          "FunctionName": "tennis-club-tracker-dev-finalizeMatch",
          "FunctionArn": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-finalizeMatch",
          "Runtime": "nodejs20.x",
          "Role": "arn:aws:iam::047212758498:role/tennis-club-tracker-dev-us-west-2-lambdaRole",
          "Handler": "handlers/matches.finalize",
          "CodeSize": 3459610,
          "Description": "",
          "Timeout": 6,
          "MemorySize": 1024,
          "LastModified": "2025-09-15T21:23:09.000+0000",
          "CodeSha256": "aAYrZEPZvgsyEDBm3EbanX8cJucK5I8BlBEFPX5fLZ8=",
          "Version": "$LATEST",
          "VpcConfig": {
            "SubnetIds": [],
            "SecurityGroupIds": [],
            "VpcId": "",
            "Ipv6AllowedForDualStack": false
          },
          "Environment": {
            "Variables": {
              "CLUB_MEMBERS_TABLE": "tennis-club-tracker-dev-ClubMembers",
              "COGNITO_POOL_ID": "us-east-2_EMupYOMCX",
              "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
              "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
              "USERS_TABLE": "tennis-club-tracker-dev-Users",
              "COGNITO_REGION": "us-east-2",
              "MATCHES_BY_CLUB_INDEX": "byClubV2",
              "COGNITO_CLIENT_ID": "35qpjq5uuv929k26amc1rbkdlk",
              "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections"
            }
          },
          "KMSKeyArn": null,
          "TracingConfig": {
            "Mode": "PassThrough"
          },
          "MasterArn": null,
          "RevisionId": "55ac9c27-24de-4334-ae14-953cf5fbc242",
          "State": "Active",
          "StateReason": null,
          "StateReasonCode": null,
          "LastUpdateStatus": "Successful",
          "LastUpdateStatusReason": null,
          "LastUpdateStatusReasonCode": null,
          "PackageType": "Zip",
          "SigningProfileVersionArn": null,
          "SigningJobArn": null,
          "Architectures": [
            "x86_64"
          ],
          "EphemeralStorage": {
            "Size": 512
          },
          "SnapStart": {
            "ApplyOn": "None",
            "OptimizationStatus": "Off"
          },
          "RuntimeVersionConfig": {
            "RuntimeVersionArn": "arn:aws:lambda:us-west-2::runtime:1ffa4c233e75382c8a39aa96770f3b81af75cba9794a5c2a1750c1ee63cdfe10"
          },
          "LoggingConfig": {
            "LogFormat": "Text",
            "ApplicationLogLevel": null,
            "SystemLogLevel": null,
            "LogGroup": "/aws/lambda/tennis-club-tracker-dev-finalizeMatch"
          },
          "Layers": []
        },
        "Code": {
          "RepositoryType": "S3",
          "Location": "https://awslambda-us-west-2-tasks.s3.us-west-2.amazonaws.com/snapshots/047212758498/tennis-club-tracker-dev-finalizeMatch-7a2269c8-9e0c-4ab5-a96a-89dc2f43c540?versionId=Uqcux77FvYyh87nS19AJagyeUPMKNNqI&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEP7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIB5V6xS088Kact7LdRX214Nyqv%2FUuj10rCb%2Bssd00i3RAiAvnCeEiOz23JNkp9eWBZGOEBC7tpqABTheafyzvcD4KiqJAgh3EAUaDDUwMjI5NzA3NjE2MyIMgBZWI5UMr3eYJDG8KuYBtWPBqV2OzFuj3ahdSh0T47enNRQeEtcFZQKaqHHCzROxuVv2g8k6FAtRA4fOLVcnJ9DfuULFIhgnOWfspJOJDU%2Bqr9RhqUa1bRYuqdLlWibrNTlL5aZg2dKop0lXPDtSOmeJTP%2FKGdB7GL37V63U5k5QUVk0mIzQ7q2uTqkteGiFjbJRIHHogpVeB0uRuDntAgG9fUSPvBkAe0GFr8mQkptL8Y5T2m39wYTGWl5G7SjPOWHqfXCCvip12m%2BbUZSsCzBDLR85O5fYfShmpbJ5ss3BCVAYxHMBge7MeSqrKIfsQAI9W4gwmr%2BgxgY6kAFxVwZCCSg9Oz3vhBC%2BEPlY78hfCVFPFQeba%2FFBn0bnaHrjI6MyhExoUDjKNvvqJrt9jSM2rTbec7CUBPBYeBR1hviZhtz8%2FwFWutKaPyXRDPjCHbVKfv9ZD%2F2oRjs5R7RzNK6EJozBZGCg6IiU4JD0Ue42XdeCqYIp7KK2%2FZrz3%2FP6%2F02irzyJQnwyh8J5mtI%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250915T214100Z&X-Amz-SignedHeaders=host&X-Amz-Expires=600&X-Amz-Credential=ASIAXJ4Z5EHB73PBDV3Y%2F20250915%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Signature=58ca998e544852513cdf14f29efc60c05952c89d7ea4ff816bd536d12af50015",
          "ImageUri": null,
          "ResolvedImageUri": null
        },
        "Tags": {
          "aws:cloudformation:stack-name": "tennis-club-tracker-dev",
          "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-west-2:047212758498:stack/tennis-club-tracker-dev/ff704d60-75ac-11f0-8fa9-0a13a4d37ce1",
          "STAGE": "dev",
          "aws:cloudformation:logical-id": "FinalizeMatchLambdaFunction"
        }
      }
    },
    "dashboard": {
      "isEnabledForService": false,
      "requiredAuthentication": false,
      "orgFeaturesInUse": null,
      "orgObservabilityIntegrations": null,
      "serviceAppId": null,
      "serviceProvider": null,
      "instanceParameters": null
    },
    "serviceRawFile": "service: tennis-club-tracker\r\nframeworkVersion: \"4\"\r\n\r\nprovider:\r\n  name: aws\r\n  runtime: nodejs20.x\r\n  region: us-west-2\r\n  stage: dev\r\n  environment:\r\n    CLUBS_TABLE: ${self:service}-${sls:stage}-Clubs\r\n    MATCHES_TABLE: ${self:service}-${sls:stage}-Matches\r\n    USERS_TABLE: ${self:service}-${sls:stage}-Users\r\n    CONNECTIONS_TABLE: ${self:service}-${sls:stage}-Connections\r\n    CLUB_MEMBERS_TABLE: ${self:service}-${sls:stage}-ClubMembers\r\n    # GSI name used by matches.list\r\n    MATCHES_BY_CLUB_INDEX: byClubV2\r\n    # JWT verification (Cognito)\r\n    COGNITO_REGION: us-east-2\r\n    COGNITO_POOL_ID: us-east-2_EMupYOMCX\r\n    COGNITO_CLIENT_ID: 35qpjq5uuv929k26amc1rbkdlk\r\n\r\n  iam:\r\n    role:\r\n      statements:\r\n        # Table-level CRUD + read ops\r\n        - Effect: Allow\r\n          Action:\r\n            - dynamodb:PutItem\r\n            - dynamodb:GetItem\r\n            - dynamodb:UpdateItem\r\n            - dynamodb:DeleteItem\r\n            - dynamodb:Query\r\n            - dynamodb:Scan\r\n          Resource:\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CLUBS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.MATCHES_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.USERS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CONNECTIONS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CLUB_MEMBERS_TABLE}\r\n            # allow ALL GSIs on these tables (prevents future ARN edits)\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.MATCHES_TABLE}/index/*\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CONNECTIONS_TABLE}/index/*\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CLUB_MEMBERS_TABLE}/index/*\r\n\r\n        # WebSocket connection mgmt\r\n        - Effect: Allow\r\n          Action:\r\n            - execute-api:ManageConnections\r\n          Resource:\r\n            - arn:aws:execute-api:${aws:region}:${aws:accountId}:*/${sls:stage}/@connections/*\r\n\r\npackage:\r\n  individually: true\r\n  patterns:\r\n    - handlers/**\r\n    - utils/**\r\n    - node_modules/**\r\n    - package.json\r\n    - package-lock.json\r\n\r\nfunctions:\r\n  # ---------- REST ----------\r\n  getClubs:\r\n    handler: handlers/clubs.get\r\n    events:\r\n      - http:\r\n          path: clubs\r\n          method: get\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  createClub:\r\n    handler: handlers/clubs.create\r\n    events:\r\n      - http:\r\n          path: clubs\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  createMatch:\r\n    handler: handlers/matches.create\r\n    events:\r\n      - http:\r\n          path: matches\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  listMatches:\r\n    handler: handlers/matches.list\r\n    events:\r\n      - http:\r\n          path: matches\r\n          method: get\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  getMatch:\r\n    handler: handlers/matches.get\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}\r\n          method: get\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  updateScore:\r\n    handler: handlers/matches.score\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}/score\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  finalizeMatch:\r\n    handler: handlers/matches.finalize\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}/finalize\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  # Users\r\n  getMe:\r\n    handler: handlers/users.getMe\r\n    events:\r\n      - http:\r\n          path: me\r\n          method: get\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  updateProfile:\r\n    handler: handlers/users.updateProfile\r\n    events:\r\n      - http:\r\n          path: profile\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  # Club membership\r\n  joinClub:\r\n    handler: handlers/members.join\r\n    events:\r\n      - http:\r\n          path: clubs/{clubId}/members\r\n          method: post\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  listMembers:\r\n    handler: handlers/members.list\r\n    events:\r\n      - http:\r\n          path: clubs/{clubId}/members\r\n          method: get\r\n          cors:\r\n            origins:\r\n              - https://tenniscluboh.com\r\n              - https://www.tenniscluboh.com\r\n            headers:\r\n              - Content-Type\r\n              - Authorization\r\n            allowCredentials: false\r\n\r\n  # Optional: Pre sign-up auto-confirm trigger (not wired in console)\r\n  preSignUp:\r\n    handler: handlers/authTriggers.preSignUp\r\n\r\n  # ---------- WebSocket ----------\r\n  wsConnect:\r\n    handler: handlers/websocket.connect\r\n    events:\r\n      - websocket:\r\n          route: $connect\r\n\r\n  wsDisconnect:\r\n    handler: handlers/websocket.disconnect\r\n    events:\r\n      - websocket:\r\n          route: $disconnect\r\n\r\n  wsDefault:\r\n    handler: handlers/websocket.onMessage\r\n    events:\r\n      - websocket:\r\n          route: $default\r\n\r\nresources:\r\n  Resources:\r\n    ClubsTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.CLUBS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: clubId\r\n            KeyType: HASH\r\n\r\n    UsersTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.USERS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: userId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: userId\r\n            KeyType: HASH\r\n\r\n    MatchesTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.MATCHES_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: matchId\r\n            AttributeType: S\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n          - AttributeName: startedAt\r\n            AttributeType: N\r\n        KeySchema:\r\n          - AttributeName: matchId\r\n            KeyType: HASH\r\n        GlobalSecondaryIndexes:\r\n          # Keep the existing GSI EXACTLY as it exists in AWS (hash-only)\r\n          - IndexName: byClub\r\n            KeySchema:\r\n              - AttributeName: clubId\r\n                KeyType: HASH\r\n            Projection:\r\n              ProjectionType: ALL\r\n\r\n          # Add the new GSI you will use going forward (hash + range)\r\n          - IndexName: byClubV2\r\n            KeySchema:\r\n              - AttributeName: clubId\r\n                KeyType: HASH\r\n              - AttributeName: startedAt\r\n                KeyType: RANGE\r\n            Projection:\r\n              ProjectionType: ALL\r\n\r\n    ConnectionsTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.CONNECTIONS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: connectionId\r\n            AttributeType: S\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: connectionId\r\n            KeyType: HASH\r\n        GlobalSecondaryIndexes:\r\n          - IndexName: byClub\r\n            KeySchema:\r\n              - AttributeName: clubId\r\n                KeyType: HASH\r\n            Projection:\r\n              ProjectionType: ALL\r\n\r\n    ClubMembersTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.CLUB_MEMBERS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n          - AttributeName: userId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: clubId\r\n            KeyType: HASH\r\n          - AttributeName: userId\r\n            KeyType: RANGE\r\n        GlobalSecondaryIndexes:\r\n          - IndexName: byUser\r\n            KeySchema:\r\n              - AttributeName: userId\r\n                KeyType: HASH\r\n            Projection:\r\n              ProjectionType: ALL\r\n",
    "command": [
      "deploy",
      "function"
    ],
    "options": {
      "aws-profile": "tennis",
      "function": "finalizeMatch"
    },
    "orgId": "10bb995e-684d-462c-94d3-b218f99288a9",
    "orgName": "jaysohcode",
    "userId": "sZJ5HGGGmCd9zcBFxV",
    "userName": "jaysohcode",
    "serviceProviderAwsAccountId": "047212758498",
    "serviceProviderAwsCfStackName": "tennis-club-tracker-dev",
    "serviceProviderAwsCfStackId": "arn:aws:cloudformation:us-west-2:047212758498:stack/tennis-club-tracker-dev/ff704d60-75ac-11f0-8fa9-0a13a4d37ce1",
    "serviceProviderAwsCfStackCreated": "2025-08-10T05:43:53.223Z",
    "serviceProviderAwsCfStackUpdated": "2025-09-15T21:23:00.343Z",
    "serviceProviderAwsCfStackStatus": "UPDATE_COMPLETE",
    "serviceProviderAwsCfStackOutputs": [
      {
        "OutputKey": "WsDefaultLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsDefault:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsDefaultLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "WsDisconnectLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsDisconnect:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsDisconnectLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "JoinClubLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-joinClub:4",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-JoinClubLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ListMembersLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-listMembers:4",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-ListMembersLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "GetMeLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-getMe:4",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-GetMeLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "PreSignUpLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-preSignUp:4",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-PreSignUpLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "WsConnectLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsConnect:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsConnectLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ServerlessDeploymentBucketName",
        "OutputValue": "serverless-framework-deployments-us-west-2-50484812-2351",
        "ExportName": "sls-tennis-club-tracker-dev-ServerlessDeploymentBucketName"
      },
      {
        "OutputKey": "GetClubsLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-getClubs:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-GetClubsLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "UpdateProfileLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-updateProfile:4",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-UpdateProfileLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "UpdateScoreLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-updateScore:5",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-UpdateScoreLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "CreateMatchLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-createMatch:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-CreateMatchLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "GetMatchLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-getMatch:5",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-GetMatchLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ListMatchesLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-listMatches:8",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-ListMatchesLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "CreateClubLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-createClub:7",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-CreateClubLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ServiceEndpoint",
        "OutputValue": "https://r9521m884k.execute-api.us-west-2.amazonaws.com/dev",
        "Description": "URL of the service endpoint",
        "ExportName": "sls-tennis-club-tracker-dev-ServiceEndpoint"
      },
      {
        "OutputKey": "ServiceEndpointWebsocket",
        "OutputValue": "wss://pzewo98x2m.execute-api.us-west-2.amazonaws.com/dev",
        "Description": "URL of the service endpoint",
        "ExportName": "sls-tennis-club-tracker-dev-ServiceEndpointWebsocket"
      },
      {
        "OutputKey": "FinalizeMatchLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-finalizeMatch:5",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-FinalizeMatchLambdaFunctionQualifiedArn"
      }
    ]
  }
}