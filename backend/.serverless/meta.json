{
  "C:\\Users\\jonat\\github\\tennis-club\\backend\\serverless.yml": {
    "versionFramework": "4.18.0",
    "servicePath": "C:\\Users\\jonat\\github\\tennis-club\\backend\\serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "service": "tennis-club-tracker",
      "frameworkVersion": "4",
      "provider": {
        "name": "aws",
        "runtime": "nodejs20.x",
        "region": "us-west-2",
        "stage": "dev",
        "environment": {
          "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
          "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
          "USERS_TABLE": "tennis-club-tracker-dev-Users",
          "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections"
        },
        "iam": {
          "role": {
            "statements": [
              {
                "Effect": "Allow",
                "Action": [
                  "dynamodb:PutItem",
                  "dynamodb:GetItem",
                  "dynamodb:UpdateItem",
                  "dynamodb:DeleteItem",
                  "dynamodb:Query",
                  "dynamodb:Scan"
                ],
                "Resource": [
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Clubs",
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Matches",
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Users",
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Connections",
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Matches/index/byClub",
                  "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Connections/index/byClub"
                ]
              },
              {
                "Effect": "Allow",
                "Action": [
                  "execute-api:ManageConnections"
                ],
                "Resource": [
                  "arn:aws:execute-api:${aws:region}:${aws:accountId}:*/dev/@connections/*"
                ]
              }
            ]
          }
        }
      },
      "package": {
        "individually": true,
        "patterns": [
          "handlers/**",
          "utils/**",
          "node_modules/**",
          "package.json",
          "package-lock.json"
        ]
      },
      "functions": {
        "getClubs": {
          "handler": "handlers/clubs.get",
          "events": [
            {
              "http": {
                "path": "clubs",
                "method": "get",
                "cors": true
              }
            }
          ]
        },
        "createClub": {
          "handler": "handlers/clubs.create",
          "events": [
            {
              "http": {
                "path": "clubs",
                "method": "post",
                "cors": true
              }
            }
          ]
        },
        "createMatch": {
          "handler": "handlers/matches.create",
          "events": [
            {
              "http": {
                "path": "matches",
                "method": "post",
                "cors": true
              }
            }
          ]
        },
        "listMatches": {
          "handler": "handlers/matches.list",
          "events": [
            {
              "http": {
                "path": "matches",
                "method": "get",
                "cors": true
              }
            }
          ]
        },
        "getMatch": {
          "handler": "handlers/matches.get",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}",
                "method": "get",
                "cors": true
              }
            }
          ]
        },
        "updateScore": {
          "handler": "handlers/matches.score",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}/score",
                "method": "post",
                "cors": true
              }
            }
          ]
        },
        "finalizeMatch": {
          "handler": "handlers/matches.finalize",
          "events": [
            {
              "http": {
                "path": "matches/{matchId}/finalize",
                "method": "post",
                "cors": true
              }
            }
          ]
        },
        "wsConnect": {
          "handler": "handlers/websocket.connect",
          "events": [
            {
              "websocket": {
                "route": "$connect"
              }
            }
          ]
        },
        "wsDisconnect": {
          "handler": "handlers/websocket.disconnect",
          "events": [
            {
              "websocket": {
                "route": "$disconnect"
              }
            }
          ]
        },
        "wsDefault": {
          "handler": "handlers/websocket.onMessage",
          "events": [
            {
              "websocket": {
                "route": "$default"
              }
            }
          ]
        }
      },
      "resources": {
        "Resources": {
          "ClubsTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Clubs",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "clubId",
                  "KeyType": "HASH"
                }
              ]
            }
          },
          "UsersTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Users",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "userId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "userId",
                  "KeyType": "HASH"
                }
              ]
            }
          },
          "MatchesTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Matches",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "matchId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "matchId",
                  "KeyType": "HASH"
                }
              ],
              "GlobalSecondaryIndexes": [
                {
                  "IndexName": "byClub",
                  "KeySchema": [
                    {
                      "AttributeName": "clubId",
                      "KeyType": "HASH"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                }
              ]
            }
          },
          "ConnectionsTable": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
              "TableName": "tennis-club-tracker-dev-Connections",
              "BillingMode": "PAY_PER_REQUEST",
              "AttributeDefinitions": [
                {
                  "AttributeName": "connectionId",
                  "AttributeType": "S"
                },
                {
                  "AttributeName": "clubId",
                  "AttributeType": "S"
                }
              ],
              "KeySchema": [
                {
                  "AttributeName": "connectionId",
                  "KeyType": "HASH"
                }
              ],
              "GlobalSecondaryIndexes": [
                {
                  "IndexName": "byClub",
                  "KeySchema": [
                    {
                      "AttributeName": "clubId",
                      "KeyType": "HASH"
                    }
                  ],
                  "Projection": {
                    "ProjectionType": "ALL"
                  }
                }
              ]
            }
          }
        }
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "us-west-2",
      "stage": "dev",
      "environment": {
        "CLUBS_TABLE": "tennis-club-tracker-dev-Clubs",
        "MATCHES_TABLE": "tennis-club-tracker-dev-Matches",
        "USERS_TABLE": "tennis-club-tracker-dev-Users",
        "CONNECTIONS_TABLE": "tennis-club-tracker-dev-Connections"
      },
      "iam": {
        "role": {
          "statements": [
            {
              "Effect": "Allow",
              "Action": [
                "dynamodb:PutItem",
                "dynamodb:GetItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:Query",
                "dynamodb:Scan"
              ],
              "Resource": [
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Clubs",
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Matches",
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Users",
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Connections",
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Matches/index/byClub",
                "arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/tennis-club-tracker-dev-Connections/index/byClub"
              ]
            },
            {
              "Effect": "Allow",
              "Action": [
                "execute-api:ManageConnections"
              ],
              "Resource": [
                "arn:aws:execute-api:${aws:region}:${aws:accountId}:*/dev/@connections/*"
              ]
            }
          ]
        }
      }
    },
    "dashboard": {
      "isEnabledForService": false,
      "requiredAuthentication": false,
      "orgFeaturesInUse": null,
      "orgObservabilityIntegrations": null,
      "serviceAppId": null,
      "serviceProvider": null,
      "instanceParameters": null
    },
    "error": {
      "message": "Failed to resolve variable 'region' with resolver 'ssm' and provider 'default-aws-credential-resolver': Error: AWS credentials missing or invalid. Original error from AWS: Could not load credentials from any providers",
      "stack": "Error: Failed to resolve variable 'region' with resolver 'ssm' and provider 'default-aws-credential-resolver': Error: AWS credentials missing or invalid. Original error from AWS: Could not load credentials from any providers\n    at #resolveKey (file:///C:/Users/jonat/.serverless/releases/4.18.0/package/dist/sf-core.js:809:25583)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async _ResolverManager.resolve (file:///C:/Users/jonat/.serverless/releases/4.18.0/package/dist/sf-core.js:809:31573)\n    at async #handlePlaceholderNode (file:///C:/Users/jonat/.serverless/releases/4.18.0/package/dist/sf-core.js:809:30118)\n    at async file:///C:/Users/jonat/.serverless/releases/4.18.0/package/dist/sf-core.js:809:27990\n    at async processNodeAndHandleCompletion (file:///C:/Users/jonat/.serverless/releases/4.18.0/package/dist/sf-core.js:809:16769)",
      "code": "RESOLVER_RESOLVE_VARIABLE_ERROR"
    },
    "serviceRawFile": "service: tennis-club-tracker\r\nframeworkVersion: \"4\"\r\n\r\nprovider:\r\n  name: aws\r\n  runtime: nodejs20.x\r\n  region: us-west-2\r\n  stage: dev\r\n  environment:\r\n    CLUBS_TABLE: ${self:service}-${sls:stage}-Clubs\r\n    MATCHES_TABLE: ${self:service}-${sls:stage}-Matches\r\n    USERS_TABLE: ${self:service}-${sls:stage}-Users\r\n    CONNECTIONS_TABLE: ${self:service}-${sls:stage}-Connections\r\n  iam:\r\n    role:\r\n      statements:\r\n        - Effect: Allow\r\n          Action:\r\n            - dynamodb:PutItem\r\n            - dynamodb:GetItem\r\n            - dynamodb:UpdateItem\r\n            - dynamodb:DeleteItem\r\n            - dynamodb:Query\r\n            - dynamodb:Scan\r\n          Resource:\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CLUBS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.MATCHES_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.USERS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CONNECTIONS_TABLE}\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.MATCHES_TABLE}/index/byClub\r\n            - arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:provider.environment.CONNECTIONS_TABLE}/index/byClub\r\n        - Effect: Allow\r\n          Action:\r\n            - execute-api:ManageConnections\r\n          Resource:\r\n            - arn:aws:execute-api:${aws:region}:${aws:accountId}:*/${sls:stage}/@connections/*\r\n\r\npackage:\r\n  individually: true\r\n  patterns:\r\n    - \"handlers/**\"\r\n    - \"utils/**\"\r\n    - \"node_modules/**\"\r\n    - \"package.json\"\r\n    - \"package-lock.json\"\r\n\r\n\r\nfunctions:\r\n  # ---------- REST ----------\r\n  getClubs:\r\n    handler: handlers/clubs.get\r\n    events:\r\n      - http:\r\n          path: clubs\r\n          method: get\r\n          cors: true\r\n\r\n  createClub:\r\n    handler: handlers/clubs.create\r\n    events:\r\n      - http:\r\n          path: clubs\r\n          method: post\r\n          cors: true\r\n          \r\n  createMatch:\r\n    handler: handlers/matches.create\r\n    events:\r\n      - http:\r\n          path: matches\r\n          method: post\r\n          cors: true\r\n\r\n  listMatches:\r\n    handler: handlers/matches.list\r\n    events:\r\n      - http:\r\n          path: matches\r\n          method: get\r\n          cors: true\r\n\r\n  getMatch:\r\n    handler: handlers/matches.get\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}\r\n          method: get\r\n          cors: true\r\n\r\n  updateScore:\r\n    handler: handlers/matches.score\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}/score\r\n          method: post\r\n          cors: true\r\n\r\n  finalizeMatch:\r\n    handler: handlers/matches.finalize\r\n    events:\r\n      - http:\r\n          path: matches/{matchId}/finalize\r\n          method: post\r\n          cors: true\r\n\r\n\r\n  # ---------- WebSocket ----------\r\n  wsConnect:\r\n    handler: handlers/websocket.connect\r\n    events:\r\n      - websocket:\r\n          route: $connect\r\n\r\n  wsDisconnect:\r\n    handler: handlers/websocket.disconnect\r\n    events:\r\n      - websocket:\r\n          route: $disconnect\r\n\r\n  wsDefault:\r\n    handler: handlers/websocket.onMessage\r\n    events:\r\n      - websocket:\r\n          route: $default\r\n\r\nresources:\r\n  Resources:\r\n    ClubsTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.CLUBS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: clubId\r\n            KeyType: HASH\r\n\r\n    UsersTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.USERS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: userId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: userId\r\n            KeyType: HASH\r\n\r\n    MatchesTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.MATCHES_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: matchId\r\n            AttributeType: S\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: matchId\r\n            KeyType: HASH\r\n        GlobalSecondaryIndexes:\r\n          - IndexName: byClub\r\n            KeySchema:\r\n              - AttributeName: clubId\r\n                KeyType: HASH\r\n            Projection:\r\n              ProjectionType: ALL\r\n\r\n    ConnectionsTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:provider.environment.CONNECTIONS_TABLE}\r\n        BillingMode: PAY_PER_REQUEST\r\n        AttributeDefinitions:\r\n          - AttributeName: connectionId\r\n            AttributeType: S\r\n          - AttributeName: clubId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: connectionId\r\n            KeyType: HASH\r\n        GlobalSecondaryIndexes:\r\n          - IndexName: byClub\r\n            KeySchema:\r\n              - AttributeName: clubId\r\n                KeyType: HASH\r\n            Projection:\r\n              ProjectionType: ALL\r\n",
    "command": [
      "deploy"
    ],
    "options": {},
    "orgId": "10bb995e-684d-462c-94d3-b218f99288a9",
    "orgName": "jaysohcode",
    "userId": "sZJ5HGGGmCd9zcBFxV",
    "userName": "jaysohcode",
    "serviceProviderAwsCfStackId": "arn:aws:cloudformation:us-west-2:047212758498:stack/tennis-club-tracker-dev/ff704d60-75ac-11f0-8fa9-0a13a4d37ce1",
    "serviceProviderAwsCfStackCreated": "2025-08-10T05:43:53.223Z",
    "serviceProviderAwsCfStackUpdated": "2025-08-10T06:44:25.404Z",
    "serviceProviderAwsCfStackStatus": "UPDATE_COMPLETE",
    "serviceProviderAwsCfStackOutputs": [
      {
        "OutputKey": "CreateMatchLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-createMatch:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-CreateMatchLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "WsDefaultLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsDefault:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsDefaultLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "WsDisconnectLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsDisconnect:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsDisconnectLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ListMatchesLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-listMatches:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-ListMatchesLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "CreateClubLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-createClub:2",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-CreateClubLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "WsConnectLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-wsConnect:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-WsConnectLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "ServiceEndpoint",
        "OutputValue": "https://r9521m884k.execute-api.us-west-2.amazonaws.com/dev",
        "Description": "URL of the service endpoint",
        "ExportName": "sls-tennis-club-tracker-dev-ServiceEndpoint"
      },
      {
        "OutputKey": "ServiceEndpointWebsocket",
        "OutputValue": "wss://pzewo98x2m.execute-api.us-west-2.amazonaws.com/dev",
        "Description": "URL of the service endpoint",
        "ExportName": "sls-tennis-club-tracker-dev-ServiceEndpointWebsocket"
      },
      {
        "OutputKey": "ServerlessDeploymentBucketName",
        "OutputValue": "serverless-framework-deployments-us-west-2-50484812-2351",
        "ExportName": "sls-tennis-club-tracker-dev-ServerlessDeploymentBucketName"
      },
      {
        "OutputKey": "GetClubsLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-west-2:047212758498:function:tennis-club-tracker-dev-getClubs:3",
        "Description": "Current Lambda function version",
        "ExportName": "sls-tennis-club-tracker-dev-GetClubsLambdaFunctionQualifiedArn"
      }
    ]
  }
}